{
  "name": "smart-code-agent",
  "version": "1.0.0",
  "description": "智能代码规范化自动生成 MCP 插件 - 需求闭环、Skill插件化、自我学习、观察者迭代",
  "author": "",
  "license": "MIT",
  "type": "module",
  "main": "dist/index.js",
  "mcp": {
    "version": "1.0",
    "capabilities": {
      "skills": true,
      "observer": true,
      "knowledge": true,
      "workflow": true
    },
    "tools": [
      {
        "name": "sca-start",
        "description": "启动 Smart Code Agent 开发流程，从需求采集开始",
        "inputSchema": {
          "type": "object",
          "properties": {
            "projectType": {
              "type": "string",
              "enum": ["page", "api", "component", "project"],
              "description": "项目类型：页面(page)、接口(api)、组件(component)、项目(project)"
            },
            "initialDemand": {
              "type": "string",
              "description": "初始需求描述"
            },
            "projectPath": {
              "type": "string",
              "description": "项目路径（可选）"
            }
          },
          "required": ["projectType"]
        }
      },
      {
        "name": "sca-resume",
        "description": "恢复中断的开发流程",
        "inputSchema": {
          "type": "object",
          "properties": {
            "traceId": {
              "type": "string",
              "description": "之前运行的追踪 ID"
            }
          },
          "required": ["traceId"]
        }
      },
      {
        "name": "sca-get-report",
        "description": "获取指定运行的观察者报告",
        "inputSchema": {
          "type": "object",
          "properties": {
            "traceId": {
              "type": "string",
              "description": "追踪 ID（可选，不提供则返回最近运行的报告）"
            }
          }
        }
      },
      {
        "name": "sca-submit-feedback",
        "description": "提交用户反馈，用于产品改进",
        "inputSchema": {
          "type": "object",
          "properties": {
            "traceId": {
              "type": "string",
              "description": "关联的追踪 ID"
            },
            "type": {
              "type": "string",
              "enum": ["bug", "suggestion", "question"],
              "description": "反馈类型"
            },
            "content": {
              "type": "string",
              "description": "反馈内容"
            },
            "stage": {
              "type": "string",
              "enum": ["demand", "code", "test", "delivery"],
              "description": "关联阶段"
            }
          },
          "required": ["type", "content"]
        }
      },
      {
        "name": "sca-add-knowledge",
        "description": "添加知识到本地知识库",
        "inputSchema": {
          "type": "object",
          "properties": {
            "topic": {
              "type": "string",
              "description": "知识主题"
            },
            "content": {
              "type": "string",
              "description": "知识内容"
            },
            "keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "关键词标签"
            },
            "source": {
              "type": "string",
              "enum": ["web", "manual", "learned"],
              "default": "manual",
              "description": "知识来源"
            }
          },
          "required": ["topic", "content"]
        }
      },
      {
        "name": "sca-search-knowledge",
        "description": "搜索本地知识库",
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "搜索关键词"
            }
          },
          "required": ["query"]
        }
      },
      {
        "name": "sca-list-workflows",
        "description": "列出所有可用的工作流"
      },
      {
        "name": "sca-run-workflow",
        "description": "执行指定的工作流",
        "inputSchema": {
          "type": "object",
          "properties": {
            "workflowName": {
              "type": "string",
              "description": "工作流名称"
            },
            "params": {
              "type": "object",
              "description": "工作流参数"
            }
          },
          "required": ["workflowName"]
        }
      }
    ],
    "resources": [
      {
        "uri": "sca://knowledge",
        "name": "knowledge-base",
        "description": "本地知识库，包含已学习的知识条目",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://runs",
        "name": "run-history",
        "description": "运行历史记录",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://runs/latest",
        "name": "latest-run",
        "description": "最近一次运行的详情",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://workflows",
        "name": "workflows",
        "description": "所有可用的工作流定义",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://config",
        "name": "agent-config",
        "description": "Smart Code Agent 当前配置",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://skills",
        "name": "skills",
        "description": "所有可用的 Skill 列表及状态",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://statistics",
        "name": "statistics",
        "description": "运行统计数据，包含成功率、平均耗时等",
        "mimeType": "application/json"
      },
      {
        "uri": "sca://feedback",
        "name": "user-feedback",
        "description": "用户反馈列表",
        "mimeType": "application/json"
      }
    ],
    "prompts": [
      {
        "name": "analyze-demand",
        "description": "分析用户需求并生成结构化报告",
        "arguments": [
          {
            "name": "demand",
            "description": "需求描述",
            "required": true
          },
          {
            "name": "projectType",
            "description": "项目类型",
            "required": true
          }
        ]
      },
      {
        "name": "generate-code",
        "description": "根据需求生成代码",
        "arguments": [
          {
            "name": "demand",
            "description": "需求描述",
            "required": true
          },
          {
            "name": "language",
            "description": "编程语言",
            "required": true
          }
        ]
      }
    ]
  }
}
